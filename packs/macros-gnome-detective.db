{"_id":"SX6gfgMyTgAmOBdq","name":"Get a case (Fully Generated)","type":"script","author":"QUmQIf6DqYHqlZbK","img":"icons/svg/book.svg","scope":"global","command":"var PERSON = [\n\t[\"the Count Elector\"],\n\t[\"Herr Davenheim\"],\n\t[\"the Halfling Cook\"],\n\t[\"the Tilean Noblemen\"],\n\t[\"Johannes Wakelig\"],\n\t[\"RÃ¼diger Eichenlichtung\"],\n\t[\"Reichsfreiherr Ecgiswehr\"],\n\t[\"Frau Schneewittchensen\"]\n];\n\nvar ADJETIVE = [\n\t[\"Bretonnian\"],\n\t[\"Dwarven\"],\n\t[\"Elven\"],\n\t[\"Tilean\"],\n\t[\"Stalian\"],\n\t[\"Albionesse\"]\n];\n\nvar PLACE = [\n\t[\"Marsohn Manor\"],\n\t[\"the Hunter's Lodge\"],\n\t[\"the Reik\"],\n\t[\"the Nehekharan Tomb\"],\n\t[\"the $PERSON Mansion\"],\n\t[\"the $ADJETIVE Express\"],\n\t[\"the $ADJETIVE Coach\"],\n\t[\"the Clouds\"],\n\t[\"the River Mortis\"],\n\t[\"Sea\"]\n];\n\nvar CRIME = [\n\t[\"Robbery\"],\n\t[\"Theft\"],\n\t[\"Crime\"],\n\t[\"Fraud\"]\n];\n\nvar TIME = [\n\t[\"after Hours\"],\n\t[\"in Retrospect\"]\n];\n\nvar ADVENTURE = [\n\t[\"the Estalian Chest\"],\n\t[\"the Halfling Mondstille Pudding\"],\n\t[\"$PLACE $CRIME\"],\n\t[\"$PERSON\"],\n\t[\"the $ADJETIVE $PERSON\"],\n\t[\"the Missing Will\"]\n];\n\n\nvar CASES = [\n\t[\"The Mysterious Affair at $PLACE\"],\n\t[\"The Kidnapped $PERSON\"],\n\t[\"The Affair at $PLACE\"],\n\t[\"The Disappearance of $PERSON\"],\n\t[\"The Adventure of $ADVENTURE\"],\n\t[\"The $ADJETIVE Mystery\"],\n\t[\"The Tragedy at $PLACE\"],\n\t[\"The Mystery of $ADVENTURE\"],\n\t[\"The Case of $ADVENTURE\"],\n\t[\"The Murder of $ADVENTURE\"],\n\t[\"The Thousand Crown Bond $CRIME\"],\n\t[\"Murder on $PLACE\"],\n\t[\"The Murder of $PERSON\"],\n\t[\"Peril at $PLACE\"],\n\t[\"Death on $PLACE\"],\n\t[\"$PERSON dies\"],\n\t[\"The Incredible $CRIME\"],\n\t[\"Problem at $PLACE\"],\n\t[\"Alphonse Investigates\"],\n\t[\"Alphonse Hercules' Mondstille\"],\n\t[\"$CRIME $TIME\"],\n\t[\"$PERSON's Dead\"]\n];\n\n\nvar ALLSTRINGS = [\n\t[\"$ADVENTURE\", ADVENTURE],\n\t[\"$CRIME\", CRIME],\n\t[\"$PLACE\", PLACE],\n\t[\"$PERSON\", PERSON],\n\t[\"$TIME\", TIME],\n\t[\"$ADJETIVE\", ADJETIVE]\n];\n\n\nfunction removedoublespaces(str) {\n\t\"use strict\";\n\tstr = str.replace(/ +(?= )/g, '');\n\tstr = str.replace(/ \\./g, '.');\n\treturn str;\n}\n\nfunction aanmanagement(str) {\n\t\"use strict\";\n\tvar strnew = str.replace(/\\b(a)\\s([aeiou])/ig, '$1n $2');\n\tstrnew = strnew.replace(/\\b(a)\\s<I>([aeiou])/ig, '$1n <I>$2');\n\treturn strnew;\n}\n\n\nfunction parsequalities(originalString) {\n\tvar notdone = 1;\n\twhile (notdone) {\n\t\tnotdone = 0;\n\t\tfor (var i = 0; i < ALLSTRINGS.length; i++) {\n\t\t\tvar lookingfor = ALLSTRINGS[i][0];\n\t\t\tvar strings = ALLSTRINGS[i][1];\n\t\t\tvar randomnumber = Math.floor(Math.random() * strings.length);\n\t\t\tvar replacement = strings[randomnumber][0];\n\t\t\tif (originalString.includes(lookingfor) == true) {\n\t\t\t\tnotdone = 1;\n\t\t\t}\n\t\t\toriginalString = originalString.replace(lookingfor, replacement);\n\t\t}\n\t}\n\tvar parsedString = aanmanagement(removedoublespaces(originalString));\n\treturn parsedString;\n}\n\n\nfunction randomCase() {\n\tvar CaseName = CASES[Math.floor(Math.random() * CASES.length)];\n\tvar Case =\n\t\tparsequalities(CaseName[0]) + \"\";\n\treturn Case;\n}\n\n\nfunction generateCase() {\n\tvar gnomecase = randomCase();\n\tgnomecase = \"The gnome recalls the chapter of his diary recounting '\"+ gnomecase +\"'\";\n\tChatMessage.create({content : gnomecase })\n}\n\ngenerateCase()","folder":null,"sort":0,"permission":{"default":0,"QUmQIf6DqYHqlZbK":3},"flags":{"core":{"sourceId":"Macro.FTMbMCIjHt37nS3q"}}}
{"_id":"eKl0ec5hgVSV1B4d","name":"Get a case (Table)","type":"script","author":"QUmQIf6DqYHqlZbK","img":"icons/svg/book.svg","scope":"global","command":"(async() => {\n\tlet pack = game.packs.get('wfrp4e-laws-gnome-detective.gnome_cases');\n\tlet docs= await pack.getDocuments();\n\tlet table = docs.find(i => i.name === 'Gnome Cases');\n\tawait table.draw({\n\t\trollMode: \"blindroll\"\n\t});\n})();","folder":null,"sort":0,"permission":{"default":0,"QUmQIf6DqYHqlZbK":3},"flags":{"core":{"sourceId":"Macro.vdsJtAvKIelsVcyj"}}}
