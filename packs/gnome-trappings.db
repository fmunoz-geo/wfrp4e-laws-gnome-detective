{"_id":"16sl84z5lqab90dy","name":"Book, Case Diary","type":"trapping","img":"modules/wfrp4e-laws-gnome-detective/assets/icons/trappings/book_diary.png","data":{"description":{"type":"String","label":"Description","value":"<p>In this distinctive diary, the greatest gnome detective of the Old World has a recount of all his cases.</p>"},"gmdescription":{"type":"String","label":"Description","value":"<p>Cases could be generated also at:</p>\n<p>https://pacomiscelaneousstuff.blogspot.com/2021/09/wfrp-bretonnian-gnome-detective-random.html</p>"},"quantity":{"type":"Number","label":"Quantity","value":1},"encumbrance":{"type":"Number","label":"Encumbrance","value":1},"price":{"type":"String","label":"Price","gc":"8","ss":"0","bp":"0"},"availability":{"type":"String","label":"Availability","value":"exotic"},"location":{"type":"Number","label":"Location","value":0},"trappingType":{"type":"String","label":"Trapping Type","value":"booksAndDocuments"},"worn":false,"spellIngredient":{"type":"String","value":""},"source":{"type":"String","label":"Source"}},"effects":[{"_id":"OmwTzgtIEzGozw0h","changes":[],"disabled":false,"duration":{"startTime":null},"icon":"modules/wfrp4e-core/icons/equipment/book_documents/book-cryptography.png","label":"Book, Case Diary","transfer":true,"flags":{"wfrp4e":{"effectTrigger":"invoke","effectApplication":"actor","hide":false,"preventDuplicateEffects":false,"script":"var PERSON = [\n\t[\"the Count Elector\"],\n\t[\"Herr Davenheim\"],\n\t[\"the Halfling Cook\"],\n\t[\"the Tilean Noblemen\"],\n\t[\"Johannes Wakelig\"],\n\t[\"RÃ¼diger Eichenlichtung\"],\n\t[\"Reichsfreiherr Ecgiswehr\"],\n\t[\"Frau Schneewittchensen\"]\n];\n\nvar ADJETIVE = [\n\t[\"Bretonnian\"],\n\t[\"Dwarven\"],\n\t[\"Elven\"],\n\t[\"Tilean\"],\n\t[\"Stalian\"],\n\t[\"Albionesse\"]\n];\n\nvar PLACE = [\n\t[\"Marsohn Manor\"],\n\t[\"the Hunter's Lodge\"],\n\t[\"the Reik\"],\n\t[\"the Nehekharan Tomb\"],\n\t[\"the $PERSON Mansion\"],\n\t[\"the $ADJETIVE Express\"],\n\t[\"the $ADJETIVE Coach\"],\n\t[\"the Clouds\"],\n\t[\"the River Mortis\"],\n\t[\"Sea\"]\n];\n\nvar CRIME = [\n\t[\"Robbery\"],\n\t[\"Theft\"],\n\t[\"Crime\"],\n\t[\"Fraud\"]\n];\n\nvar TIME = [\n\t[\"after Hours\"],\n\t[\"in Retrospect\"]\n];\n\nvar ADVENTURE = [\n\t[\"the Estalian Chest\"],\n\t[\"the Halfling Mondstille Pudding\"],\n\t[\"$PLACE $CRIME\"],\n\t[\"$PERSON\"],\n\t[\"the $ADJETIVE $PERSON\"],\n\t[\"the Missing Will\"]\n];\n\n\nvar CASES = [\n\t[\"The Mysterious Affair at $PLACE\"],\n\t[\"The Kidnapped $PERSON\"],\n\t[\"The Affair at $PLACE\"],\n\t[\"The Disappearance of $PERSON\"],\n\t[\"The Adventure of $ADVENTURE\"],\n\t[\"The $ADJETIVE Mystery\"],\n\t[\"The Tragedy at $PLACE\"],\n\t[\"The Mystery of $ADVENTURE\"],\n\t[\"The Case of $ADVENTURE\"],\n\t[\"The Murder of $ADVENTURE\"],\n\t[\"The Thousand Crown Bond $CRIME\"],\n\t[\"Murder on $PLACE\"],\n\t[\"The Murder of $PERSON\"],\n\t[\"Peril at $PLACE\"],\n\t[\"Death on $PLACE\"],\n\t[\"$PERSON dies\"],\n\t[\"The Incredible $CRIME\"],\n\t[\"Problem at $PLACE\"],\n\t[\"Alphonse Investigates\"],\n\t[\"Alphonse Hercules' Mondstille\"],\n\t[\"$CRIME $TIME\"],\n\t[\"$PERSON's Dead\"]\n];\n\n\nvar ALLSTRINGS = [\n\t[\"$ADVENTURE\", ADVENTURE],\n\t[\"$CRIME\", CRIME],\n\t[\"$PLACE\", PLACE],\n\t[\"$PERSON\", PERSON],\n\t[\"$TIME\", TIME],\n\t[\"$ADJETIVE\", ADJETIVE]\n];\n\n\nfunction removedoublespaces(str) {\n\t\"use strict\";\n\tstr = str.replace(/ +(?= )/g, '');\n\tstr = str.replace(/ \\./g, '.');\n\treturn str;\n}\n\nfunction aanmanagement(str) {\n\t\"use strict\";\n\tvar strnew = str.replace(/\\b(a)\\s([aeiou])/ig, '$1n $2');\n\tstrnew = strnew.replace(/\\b(a)\\s<I>([aeiou])/ig, '$1n <I>$2');\n\treturn strnew;\n}\n\n\nfunction parsequalities(originalString) {\n\tvar notdone = 1;\n\twhile (notdone) {\n\t\tnotdone = 0;\n\t\tfor (var i = 0; i < ALLSTRINGS.length; i++) {\n\t\t\tvar lookingfor = ALLSTRINGS[i][0];\n\t\t\tvar strings = ALLSTRINGS[i][1];\n\t\t\tvar randomnumber = Math.floor(Math.random() * strings.length);\n\t\t\tvar replacement = strings[randomnumber][0];\n\t\t\tif (originalString.includes(lookingfor) == true) {\n\t\t\t\tnotdone = 1;\n\t\t\t}\n\t\t\toriginalString = originalString.replace(lookingfor, replacement);\n\t\t}\n\t}\n\tvar parsedString = aanmanagement(removedoublespaces(originalString));\n\treturn parsedString;\n}\n\n\nfunction randomCase() {\n\tvar CaseName = CASES[Math.floor(Math.random() * CASES.length)];\n\tvar Case =\n\t\tparsequalities(CaseName[0]) ;\n\treturn Case;\n}\n\n\nfunction generateCase() {\n\tvar gnomecase = randomCase();\n\tgnomecase = \"<p>The gnome recalls the chapter of his diary recounting \\'\" + gnomecase + \"\\'.</p>\";\nChatMessage.create({\n  //speaker: ChatMessage.getSpeaker(this.actor.token),\n  content: gnomecase ,\n  type: CONST.CHAT_MESSAGE_TYPES.OTHER\n});\n}\n\n\n\n\ngenerateCase()","reduceQuantity":false}},"tint":null}],"folder":null,"sort":0,"permission":{"default":0,"QUmQIf6DqYHqlZbK":3},"flags":{"_sheetTab":"details","core":{"sourceId":"Compendium.wfrp4e-core.trappings.z8X2CMJdAZKoE3lk"}}}
{"_id":"BBiL0DSHcdPakVBS","name":"Ring of Subduction","type":"trapping","img":"modules/wfrp4e-core/icons/equipment/clothing_and_accessories/signet-ring.png","data":{"description":{"type":"String","label":"Description","value":"<p>Detect if there is a magic item, creature or spellcaster within 3 yards. No further detail.</p>\n<p>See the Horned Rat Companion pg. 93 or the official module.</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>"},"gmdescription":{"type":"String","label":"Description","value":""},"quantity":{"type":"Number","label":"Quantity","value":1},"encumbrance":{"type":"Number","label":"Encumbrance","value":0},"price":{"type":"String","label":"Price","gc":"200","ss":"0","bp":"0"},"availability":{"type":"String","label":"Availability","value":"rare"},"location":{"type":"Number","label":"Location","value":0},"trappingType":{"type":"String","label":"Trapping Type","value":"clothingAccessories"},"worn":false,"spellIngredient":{"type":"String","value":""},"source":{"type":"String","label":"Source"}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"QUmQIf6DqYHqlZbK":3},"flags":{"_sheetTab":"description","core":{"sourceId":"Compendium.wfrp4e-core.trappings.BBiL0DSHcdPakVBS"}}}
{"_id":"QPxtswd6AsQQRz6y","name":"The Ring of Belstaff","type":"trapping","img":"modules/wfrp4e-core/icons/equipment/clothing_and_accessories/signet-ring.png","data":{"description":{"type":"String","label":"Description","value":"<p>Created by the Bretonnian Wizard Marie-Celestine de Belstaff in thanks for some service (which Alphonse absolutely refuses to discuss), this ring gathers the wind of Chamon around its wearer, creating a field of dense energy that gives protection equal to 2 APs on all locations.</p>\n<p>This protection is only effective if the ring&rsquo;s wearer avoids metal armour, because a significant amount of metal in contact with the field interferes with the flow of <em>Chamon</em>.</p>"},"gmdescription":{"type":"String","label":"Description","value":""},"quantity":{"type":"Number","label":"Quantity","value":1},"encumbrance":{"type":"Number","label":"Encumbrance","value":0},"price":{"type":"String","label":"Price","gc":"35","ss":"0","bp":"0"},"availability":{"type":"String","label":"Availability","value":"exotic"},"location":{"type":"Number","label":"Location","value":0},"trappingType":{"type":"String","label":"Trapping Type","value":"clothingAccessories"},"worn":true,"spellIngredient":{"type":"String","value":""},"source":{"type":"String","label":"Source"}},"effects":[{"_id":"pSNsBU4aT3mmNi99","changes":[],"disabled":false,"duration":{"startTime":null},"icon":"modules/wfrp4e-core/icons/equipment/clothing_and_accessories/signet-ring.png","label":"The Ring of Belstaff","transfer":true,"flags":{"wfrp4e":{"effectTrigger":"prepareData","effectApplication":"equipped","hide":false,"preventDuplicateEffects":false,"script":"let AP = args.actor.status.armour\n\nAP[\"head\"].value += 2\nAP[\"rArm\"].value += 2\nAP[\"lArm\"].value += 2\nAP[\"body\"].value += 2\nAP[\"lLeg\"].value += 2\nAP[\"rLeg\"].value += 2"}},"tint":null}],"folder":null,"sort":0,"permission":{"default":0,"QUmQIf6DqYHqlZbK":3},"flags":{"_sheetTab":"description","core":{"sourceId":"Compendium.wfrp4e-core.trappings.BBiL0DSHcdPakVBS"}}}
